@using Cashflowio.Core.Interfaces
@using Newtonsoft.Json
@inject IRepository Repository
@{
    ViewData["Title"] = "Fuentes de ingreso";
    var concepts = JsonConvert.SerializeObject(new List<IncomeBreakdown>
    {
        new IncomeBreakdown
        {
            PayDay = DayOfWeek.Friday,
            Recurrence = Recurrence.Weekly,
            Amount = 3000,
            Description = "Sueldo",
            DestinationId = ViewBag.Id,
            StartDate = DateTime.Today,
            EndDate = DateTime.Now
        }
    });
}

<ejs-grid id="Grid" toolbar="@(new List<string> {"Add", "Edit", "Delete"})" locale="es-MX"
          height="420" width="auto" allowTextWrap="true" allowPaging="true" allowSorting="true">
    <e-grid-pagesettings pageSize="50" pageSizes="@(new[] {"10", "50", "100", "200", "500", "1000", "All"})"></e-grid-pagesettings>
    <e-grid-filtersettings type="Excel"></e-grid-filtersettings>
    <e-grid-sortsettings columns="@(new[] {new {field = "name", direction = "Ascending"}})"></e-grid-sortsettings>
    <e-data-manager adaptor="UrlAdaptor" url="@Url.Action("DataSource")/@ViewBag.Id" crudUrl="@Url.Action("Crud")"></e-data-manager>
    <e-grid-editSettings allowAdding="true" allowDeleting="true" allowEditing="true" mode="Dialog" showDeleteConfirmDialog="true"></e-grid-editSettings>
    <e-grid-pagesettings pageCount="10"></e-grid-pagesettings>
    <e-grid-columns>
        <e-grid-column field="id" visible="false" isPrimaryKey="true" isIdentity="true"></e-grid-column>
        <e-grid-column field="name" headerText="Nombre" validationRules="@(new {required = true})" width="170"></e-grid-column>
        <e-grid-column field="concepts" headerText="Conceptos" type="text" defaultValue="@concepts" validationRules="@(new {required = true})" width="170"></e-grid-column>
    </e-grid-columns>
</ejs-grid>