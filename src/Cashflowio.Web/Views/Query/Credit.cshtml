@model IEnumerable<CreditCharge>
@{
    ViewData["Title"] = "Credit";

    var concept = Context.Request.Query["concept"].ToString();
    var destination = Context.Request.Query["destination"].ToString();

    var filterColumns = new List<object>();

    if (!string.IsNullOrWhiteSpace(concept))
    {
        filterColumns.Add(new {field = "Concept.Name", matchCase = false, @operator = "startswith", predicate = "and", value = concept});
    }

    if (!string.IsNullOrWhiteSpace(destination))
    {
        filterColumns.Add(new {field = "Destination.Name", matchCase = false, @operator = "startswith", predicate = "and", value = destination});
    }
    
    var commands = new List<object>
    {
        new {title = "Payments", buttonOption = new {iconCss = "fas fa-cash-register fa-fw", cssClass = "e-success e-payments"}}
    };
}

<ejs-grid id="Grid" dataSource="@Model" dataBound="dataBound"
          enableHover="false" height="420" width="auto" allowSelection="false"
          toolbar="@(new List<string> {"Search"})" allowTextWrap="true"
          allowPaging="true" allowSorting="true" allowFiltering="true" load="onload">
    <e-grid-pagesettings pageSize="50" pageSizes="@(new[] {"50", "100", "200", "500", "1000", "All"})"></e-grid-pagesettings>
    <e-grid-filtersettings type="Excel" columns="@filterColumns"/>
    <e-grid-sortsettings columns="@(new[] {new {field = "Date", direction = "Descending"}})"></e-grid-sortsettings>
    <e-grid-searchsettings fields="@(new[] {"Date", "Concept", "Source", "Destination", "Amount"})"></e-grid-searchsettings>
    <e-grid-columns>
        <e-grid-column field="@nameof(CreditCharge.Date)" headerText="Date" width="100" textAlign="Center"></e-grid-column>
        <e-grid-column field="Destination.Name" headerText="Destination" width="100" textAlign="Center"></e-grid-column>
        <e-grid-column field="Concept.Name" headerText="Concept" width="100" textAlign="Center"></e-grid-column>
        <e-grid-column field="@nameof(CreditCharge.Description)" headerText="Description" width="200" textAlign="Center"></e-grid-column>
        <e-grid-column field="@nameof(CreditCharge.Amount)" headerText="Amount" width="100" type="number" format="c0" textAlign="Right"></e-grid-column>
        <e-grid-column commands="@commands" width="100"></e-grid-column>
    </e-grid-columns>
</ejs-grid>

@section Scripts{
    <script>    
         function dataBound(e) {  
                var grid = document.getElementsByClassName("e-grid")[0];
                grid.addEventListener('click', function (e) {         
                    if (e.target.classList.contains('e-payments')) {                     
                        var primaryKeyValue = e.target.closest("tr").childNodes[0].innerHTML; 
                        window.location.href = "@Url.Action("Payment", "Query")/" + primaryKeyValue;
                    }  
                });
         }  

        function onload() {
            this.columns[0].format =
                { type: 'date', format: 'ccc dd MMM yy' };
        }
    </script>
}