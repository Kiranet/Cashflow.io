@using Cashflowio.Core.Interfaces
@inject IRepository Repository
@{
    ViewData["Title"] = "Money Account";

    var types = new Syncfusion.EJ2.DropDowns.DropDownList
    {
        Value = "0",
        DataSource = new SelectList(Enum.GetValues(typeof(AccountType)).Cast<AccountType>()
            .Select(x => new {Value = (int) x, Text = x.ToString()}), "Value", "Text"),
        Query = "new ej.data.Query()", AllowFiltering = true, Fields = new Syncfusion.EJ2.DropDowns.DropDownListFieldSettings {Value = "Value", Text = "Text"}
    };

    var currencies = new Syncfusion.EJ2.DropDowns.DropDownList
    {
        Value = "0",
        DataSource = new SelectList(Enum.GetValues(typeof(Currency)).Cast<Currency>()
            .Select(x => new {Value = (int) x, Text = x.ToString()}), "Value", "Text"),
        Query = "new ej.data.Query()", AllowFiltering = true, Fields = new Syncfusion.EJ2.DropDowns.DropDownListFieldSettings {Value = "Value", Text = "Text"}
    };

    var avatars = new Syncfusion.EJ2.DropDowns.DropDownList
    {
        Value = ViewBag.Id.ToString(),
        DataSource = new SelectList(Repository.List<Avatar>()
            .Select(x => new {Value = x.Id, Text = x.Name}), "Value", "Text"),
        Query = "new ej.data.Query()", AllowFiltering = true, Fields = new Syncfusion.EJ2.DropDowns.DropDownListFieldSettings {Value = "Value", Text = "Text"}
    };
}

<ejs-grid id="Grid" toolbar="@(new List<string> {"Add", "Edit", "Delete"})" actionComplete="actionComplete"
          height="555" width="auto" allowTextWrap="true" allowPaging="true" allowSorting="true">
    <e-grid-pagesettings pageSize="50" pageSizes="@(new[] {"10", "50", "100", "200", "500", "1000", "All"})"></e-grid-pagesettings>
    <e-grid-filtersettings type="Excel"></e-grid-filtersettings>
    <e-grid-sortsettings columns="@(new[] {new {field = "name", direction = "Ascending"}})"></e-grid-sortsettings>
    <e-data-manager adaptor="UrlAdaptor" url="@Url.Action("DataSource")/@ViewBag.Id" crudUrl="@Url.Action("Crud")"></e-data-manager>
    <e-grid-editSettings allowAdding="true" allowDeleting="true" allowEditing="true" mode="Dialog" showDeleteConfirmDialog="true"></e-grid-editSettings>
    <e-grid-pagesettings pageCount="10"></e-grid-pagesettings>
    <e-grid-columns>
        <e-grid-column field="id" visible="false" isPrimaryKey="true" isIdentity="true"></e-grid-column>
        <e-grid-column field="name" headerText="Name" validationRules="@(new {required = true})" width="170"></e-grid-column>
        <e-grid-column field="type" headerText="Type" editType="dropdownedit" edit="new {@params = types }" width="120"></e-grid-column>
        <e-grid-column field="currency" headerText="Currency" editType="dropdownedit" edit="new {@params = currencies }" width="120"></e-grid-column>
        <e-grid-column field="avatarId" headerText="Avatar" editType="dropdownedit" edit="new {@params = avatars }" width="120"></e-grid-column>
    </e-grid-columns>
</ejs-grid>

@section Scripts{
    <script>
     function actionComplete(args) {
        if (args.requestType === 'beginEdit' || args.requestType === 'add') {   
            if (args.requestType === 'beginEdit') {
                 var data = args.rowData;
                 

            }
        }
    }
    </script>
}